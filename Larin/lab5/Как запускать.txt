Поведение программы настраивается при помощи флагов компиляции, которые можно закомментировать по необходимости

#define JOKER
С ним ввод происходит как во втором задинии на степике - с символом джокера и одним образцом
Без него - как в первом, n оббразцов без джокера

#define TASK
Персонализация по 5-му варианту - дополнительно ищется максимальное число исходящих дуг из одной вершины, и выводится строка с удаленными из нее вхождениями образцов

#define DEBUG
Подробный вывод шагов алгоритма. Большие и вложенные действия для удобства заключены в блоки вида
/------\
Вывод
\------/


Код компилируется g++ без дополнительных флагов.
Для удобства залито на repl.it, можно сразу запустить и протестить
https://repl.it/@AntonLarin/Larin-Anton-8383-piaa-lab5
Либо через  c++ shell:
http://cpp.sh/

Примеры тестовых данных лежат в файле tests.txt